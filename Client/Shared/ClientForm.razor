@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime
@using Syncfusion.Blazor.DataForm
@using Syncfusion.Blazor.Buttons
@using Syncfusion.Blazor.DropDowns
@using Syncfusion.Blazor.Inputs
@using System.ComponentModel.DataAnnotations

<div class="client-form">
	<EditForm Model="@Item" OnValidSubmit="OnValidated" OnInvalidSubmit="OnUnvalidated">
		<DataAnnotationsValidator />
		<div class="form">
			<div class="form-row">
				<label class="required">名前</label>
				<SfTextBox @bind-Value="Item.Name" Placeholder="名前"></SfTextBox>
				<ValidationMessage For="@(() => Item.Name)" />
			</div>
			<div class="form-row">
				<label>カナ</label>
				<SfTextBox @bind-Value="Item.Kana" Placeholder="カナ"></SfTextBox>
				<ValidationMessage For="@(() => Item.Kana)" />
			</div>
			<div class="form-row">
				<label>メールアドレス</label>
				<SfTextBox @bind-Value="Item.Email" Placeholder="メールアドレス"></SfTextBox>
				<ValidationMessage For="@(() => Item.Email)" />
			</div>
			<div class="form-row">
				<label class="required">郵便番号</label>
				<SfTextBox @bind-Value="Item.Zip" Placeholder="郵便番号"></SfTextBox>
				<ValidationMessage For="@(() => Item.Zip)" />
			</div>
			<div class="form-row">
				<label class="required">都道府県</label>
				<SfDropDownList TValue="int" TItem="Prefecture" 
					@bind-Value="@Item.Prefecture" 
					DataSource="@Prefectures"
					Placeholder="都道府県を選択"
					AllowFiltering="false">
					<DropDownListFieldSettings Value="Code" Text="Name">
					</DropDownListFieldSettings>
				</SfDropDownList>
				<ValidationMessage For="@(() => Item.Prefecture)" />
			</div>
			<div class="form-row">
				<label class="required">住所</label>
				<SfTextBox @bind-Value="Item.Address" Placeholder="住所"></SfTextBox>
				<ValidationMessage For="@(() => Item.Address)" />
			</div>
			<div class="form-row">
				<label>建物名</label>
				<SfTextBox @bind-Value="Item.Building" Placeholder="建物名"></SfTextBox>
				<ValidationMessage For="@(() => Item.Building)" />
			</div>
			<div class="form-row">
				<label>電話番号</label>
				<SfTextBox @bind-Value="Item.Phone" Placeholder="電話番号"></SfTextBox>
				<ValidationMessage For="@(() => Item.Phone)" />
			</div>
			<div class="form-buttons">
				<SfButton OnClick="OnRegister" IsPrimary="true">登録</SfButton>
				@if (this.OnClickDelete.HasDelegate)
				{
					<SfButton OnClick="OnOpenDialogue" CssClass="e-danger">削除</SfButton>
				}
				<SfButton OnClick="OnCancel">キャンセル</SfButton>
			</div>
		</div>
	</EditForm>
	<SfDialog Width="250px" ShowCloseIcon="true" IsModal="true" @bind-Visible="@IsVisible">
		<DialogTemplates>
			<Header> 確認 </Header>
			<Content> 削除してもよろしいですか? </Content>
		</DialogTemplates>
		<DialogButtons>
			<DialogButton Content="OK" IsPrimary="true" OnClick="@OnDelete" />
			<DialogButton Content="Cancel" OnClick="@OnCloseDialogue" />
		</DialogButtons>
	</SfDialog>
</div>